<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>Advance News Studio - Pro Edition</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background-color: #000; font-family: 'Arial', sans-serif; }
        
        /* ‡§¨‡•á‡§∏ ‡§®‡•ç‡§Ø‡•Ç‡§ú‡§º ‡§∏‡•ç‡§ü‡•á‡§ú ‡§è‡§®‡•Ä‡§Æ‡•á‡§∂‡§® ‡§ï‡•á ‡§∏‡§æ‡§• */
        #news-stage { 
            position: absolute; top: 0; left: 0; width: 100%; height: 91%; 
            border: none; z-index: 1; transition: all 0.7s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* 1. SOLO Mode: ‡§è‡§Ç‡§ï‡§∞ ‡§´‡•Å‡§≤ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® */
        .mode-solo #news-stage { height: 100% !important; transform: scale(1.02); }
        .mode-solo .name-tag:not(#name1), .mode-solo .ticker-container { display: none !important; }

        /* 2. BREAKING Mode: ‡§∞‡•á‡§° ‡§•‡•Ä‡§Æ ‡§î‡§∞ ‡§õ‡•ã‡§ü‡§æ ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã */
        .mode-breaking #news-stage { height: 65%; top: 10%; width: 80%; left: 10%; border: 5px solid #ff0000; box-shadow: 0 0 30px #ff0000; }
        .mode-breaking { background: radial-gradient(circle, #440000, #000); }
        .mode-breaking .ticker-container { height: 100px; background: #ff0000; border-top: 6px solid #fff; }
        .mode-breaking .ticker-label { background: #fff; color: #ff0000; font-size: 35px; }
        .mode-breaking .ticker-text { font-size: 45px; }

        /* ‡§°‡§ø‡§ú‡§æ‡§á‡§® ‡§è‡§≤‡§ø‡§Æ‡•á‡§Ç‡§ü‡•ç‡§∏ */
        #header-overlay { position: absolute; top: 20px; right: 20px; z-index: 150; text-align: right; }
        .logo-img { width: 140px; border: 2px solid #FFD700; box-shadow: 0 0 15px rgba(255,0,0,0.6); transition: 0.5s; }
        #live-clock { background: rgba(0,0,0,0.8); color: #FFD700; padding: 4px 10px; font-size: 16px; font-weight: bold; margin-top: 5px; }

        .name-tag { position: absolute; background: linear-gradient(to right, #cc0000, #ff0000); color: white; padding: 6px 20px; font-size: 20px; font-weight: bold; border-left: 6px solid #FFD700; z-index: 110; display: none; transition: 0.5s; }
        #name1 { top: 15%; left: 3%; } #name2 { top: 15%; right: 3%; }
        #name3 { bottom: 25%; left: 3%; } #name4 { bottom: 25%; right: 3%; }

        .ticker-container { position: absolute; bottom: 0; width: 100%; height: 65px; background: #990000; display: flex; align-items: center; border-top: 4px solid #FFD700; z-index: 100; transition: 0.5s; }
        .ticker-label { background: #FFD700; color: #000; padding: 0 20px; font-weight: 900; font-size: 24px; height: 100%; display: flex; align-items: center; }
        .ticker-text { white-space: nowrap; overflow: hidden; flex-grow: 1; color: #fff; font-size: 28px; font-weight: bold; }
        .ticker-text p { display: inline-block; padding-left: 100%; animation: scroll-text 15s linear infinite; margin: 0; }
        @keyframes scroll-text { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

        #click-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 200; display: flex; justify-content: center; align-items: center; color: #FFD700; font-size: 24px; cursor: pointer; text-align: center; }
    </style>
</head>
<body class="mode-grid">

    <div id="click-overlay" onclick="this.style.display='none'">
        <div>üé¨ OPEN ADVANCE STUDIO <br><small style="color:white;">Grid | Solo | Breaking News Active</small></div>
    </div>

    <div id="header-overlay">
        <img src="https://raw.githubusercontent.com/yuwaaag/logo/main/ptnlogo.png" class="logo-img">
        <div id="live-clock">00:00:00</div>
    </div>

    <iframe id="news-stage" 
        src="https://vdo.ninja/?room=AdvanceNews&scene=1&transparent=1&autoplay=1&grid=10&roomaspect=1.77&cover=1&cleanoutput=1" 
        allow="camera;microphone;autoplay">
    </iframe>

    <div id="name1" class="name-tag"></div>
    <div id="name2" class="name-tag"></div>
    <div id="name3" class="name-tag"></div>
    <div id="name4" class="name-tag"></div>

    <div class="ticker-container">
        <div id="label-box" class="ticker-label">LIVE</div>
        <div class="ticker-text"><p id="ticker-content">Syncing Advance Control Room...</p></div>
    </div>

    <script>
        // ‡§Ö‡§™‡§®‡•Ä ‡§®‡§à Google Sheet ‡§ï‡§æ CSV ‡§≤‡§ø‡§Ç‡§ï ‡§Ø‡§π‡§æ‡§Å ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç
        const sheetURL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRw5NqgryBADIaSIfjjsjsilH3Aptwdv1A0Z9QkI4KY10U5Q16VKii5b8FA_O2foUv-Z6ZfB2qba1rF/pub?gid=0&single=true&output=csv';
        let lastData = ""; 

        function updateClock() { document.getElementById('live-clock').innerText = new Date().toLocaleTimeString('en-GB'); }
        setInterval(updateClock, 1000);

        async function updateStudio() {
            try {
                const response = await fetch(`${sheetURL}&cb=${new Date().getTime()}`);
                const data = await response.text();
                if (data === lastData) return;
                lastData = data;

                const rows = data.split('\n');
                const columns = rows[0].split(',');

                // 1. ‡§∏‡•Ä‡§® ‡§Æ‡•ã‡§° ‡§ï‡§Ç‡§ü‡•ç‡§∞‡•ã‡§≤ (Column F)
                const mode = columns[5] ? columns[5].replace(/"/g, "").trim().toUpperCase() : "GRID";
                
                if (mode === "SOLO") {
                    document.body.className = "mode-solo";
                } else if (mode === "BREAKING") {
                    document.body.className = "mode-breaking";
                    document.getElementById('label-box').innerText = "BREAKING NEWS";
                } else {
                    document.body.className = "mode-grid";
                    document.getElementById('label-box').innerText = "LIVE";
                }

                // 2. ‡§®‡•ç‡§Ø‡•Ç‡§ú‡§º ‡§™‡§ü‡•ç‡§ü‡•Ä (Column A)
                document.getElementById('ticker-content').innerText = columns[0].replace(/"/g, "").trim();

                // 3. ‡§®‡§æ‡§Æ (Column B-E)
                for (let i = 1; i <= 4; i++) {
                    let nameElem = document.getElementById('name' + i);
                    let val = columns[i] ? columns[i].replace(/"/g, "").trim() : "";
                    if (val === "" || val === "0") { nameElem.style.display = 'none'; }
                    else { nameElem.style.display = 'block'; nameElem.innerText = val; }
                }
            } catch (e) { console.log("Syncing..."); }
        }

        setInterval(updateStudio, 4000);
        updateStudio();
    </script>
</body>
</html>
